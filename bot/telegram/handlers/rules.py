from aiogram.types import CallbackQuery
from aiogram.utils.exceptions import MessageNotModified

from telegram.initializer import dp
from telegram.keyboards import rules, main_markup


@dp.callback_query_handler(lambda query: query.data == rules)
async def rules_handler(query: CallbackQuery):
    rules_text = """
        ‚úÖ | –ü–û–ö–£–ü–ê–Ø –õ–Æ–ë–û–ô –¢–û–í–ê–†, –í–´ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –°–û–ì–õ–ê–®–ê–ï–¢–ï–°–¨ –°–û –í–°–ï–ú–ò –ü–†–ê–í–ò–õ–ê–ú–ò!\nP.s. –ù–µ –∑–Ω–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –≤–∞—Å –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        üíØ | –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∫—É–ø–ª–µ–Ω—ã –ª–µ–≥–∞–ª—å–Ω—ã–º –ø—É—Ç—ë–º –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º –º–∞–≥–∞–∑–∏–Ω–µ.
        ü•∏ | –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –≤–∞—à–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –û–¥–Ω–∞–∫–æ –≤—Å–µ —Ä–∞–≤–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –º–µ–Ω—è—Ç—å –ø–∞—Ä–æ–ª—å –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞.
        ü¶Ü |–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –∏ –ø–æ–ª–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥–æ, –≤–æ –≤—Ä–µ–º—è –∏ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞.
        üé• | –í—Å–µ–≥–¥–∞ –∏–º–µ–π—Ç–µ –∑–∞–ø–∏—Å—å (–≤–∏–¥–µ–æ–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ), —á—Ç–æ–±—ã –≤ —Å–ª—É—á–∞–µ –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –º—ã –º–æ–≥–ª–∏ –≤—ã–¥–∞—Ç—å –≤–∞–º –∑–∞–º–µ–Ω—É.
        üí∏ | –í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ –∑–∞ –∫—É–ø–ª–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º, —Ç–æ–ª—å–∫–æ –∑–∞–º–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞, –≤ —Å–ª—É—á–∞–µ –µ–≥–æ –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏.
        üí∏ | –ë–∞–ª–∞–Ω—Å —Å –±–æ—Ç–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º!
        """
    try:
        await query.message.edit_caption(
            caption=rules_text,
            reply_markup=await main_markup()
        )
    except MessageNotModified:
        return
